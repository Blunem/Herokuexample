(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(15),r=t.n(a),c=t(6),u=t(3),o=t(2),i=t(0),s=function(e){var n=e.formValues;return Object(i.jsxs)("form",{onSubmit:n.onSubmit,children:[Object(i.jsxs)("div",{children:[" ",n.name.name,": ",Object(i.jsx)("input",{value:n.name.value,onChange:n.name.onChange})]}),Object(i.jsxs)("div",{children:[" ",n.number.name,": ",Object(i.jsx)("input",{value:n.number.value,onChange:n.number.onChange})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.data,t=e.onClick;return Object(i.jsx)("ul",{children:n.map((function(e){return Object(i.jsxs)("li",{children:[e.name," (",e.number,") ",Object(i.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.name)}))})},d=function(e){var n=e.value,t=e.onChange;return Object(i.jsx)("form",{children:Object(i.jsxs)("div",{children:["Filter shown with ",Object(i.jsx)("input",{value:n,onChange:t})]})})},f=t(4),m=t.n(f),b="/api/persons",j={getAll:function(){return m.a.get(b).then((function(e){return e.data}))},create:function(e){return m.a.post(b,e).then((function(e){return e.data}))},update:function(e,n){return m.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},erase:function(e){return m.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))}},h=(t(39),function(e){var n=e.notification;return null===n.message?null:Object(i.jsx)("div",{className:n.style,children:n.message})}),O=function(){var e=Object(o.useState)(""),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(o.useState)("Omar Valenzuela"),f=Object(u.a)(r,2),m=f[0],b=f[1],O=Object(o.useState)("668-856-12-98"),v=Object(u.a)(O,2),p=v[0],g=v[1],x=Object(o.useState)([]),w=Object(u.a)(x,2),C=w[0],y=w[1],k=Object(o.useState)({message:null,style:null}),S=Object(u.a)(k,2),L=S[0],T=S[1];Object(o.useEffect)((function(){j.getAll().then((function(e){return y(e)}))}),[]);var A=function(e,n){n(e.target.value)},V={onSubmit:function(e){e.preventDefault();var n={name:m,number:p};if(!function(e){var n=!1,t=!1;return""===e.name?window.alert("the name field has been left empty"):t=!0,""===e.number?window.alert("the number field has been left empty"):n=!0,!(t&&n)}(n))if(function(e,n){var t=n.name.toLowerCase();return e.find((function(e){return e.name.toLowerCase()===t}))}(C,n)){if(window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with a new one?"))){var t=C.find((function(e){return e.name===m})),a=Object(c.a)(Object(c.a)({},t),{},{number:n.number});j.update(a.id,a).then((function(e){return y(C.map((function(n){return n.id!==e.id?n:e})))})).catch((function(e){var n={message:"the person '".concat(t.name,"' was already deleted from server"),style:"error"};T(n),setTimeout((function(){T({message:null,style:null})}),5e3),y(C.filter((function(e){return e.id!==a.id})))}))}}else j.create(n).then((function(e){y(C.concat(e));var n={message:"".concat(e.name," was saved"),style:"success"};T(n),setTimeout((function(){T({message:null,style:null})}),5e3)})),b(""),g("")},name:{name:"name",value:m,onChange:function(e){return A(e,b)}},number:{name:"number",value:p,onChange:function(e){return A(e,g)}}};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(h,{notification:L}),Object(i.jsx)(d,{value:t,onChange:function(e){return A(e,a)}}),Object(i.jsx)("h3",{children:"Add a new"}),Object(i.jsx)(s,{formValues:V}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(l,{data:function(e,n){var t=n.toLowerCase();return""===t?e:e.filter((function(e){return e.name.toLowerCase().includes(t)}))}(C,t),onClick:function(e){window.confirm("Delete ".concat(e.name,"?"))&&j.erase(e.id).then(y(C.filter((function(n){return n.id!==e.id})))).catch((function(n){var t={message:"The person ".concat(e.name," was already deleted from server"),style:"error"};T(t),setTimeout((function(){T({message:null,style:null})}),5e3),y(C.filter((function(n){return n.id!==e.id})))}))}})]})};r.a.render(Object(i.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.6bafec67.chunk.js.map
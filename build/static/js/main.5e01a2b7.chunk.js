(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(15),r=t.n(a),c=t(6),u=t(3),o=t(2),s=t(0),i=function(e){var n=e.formValues;return Object(s.jsxs)("form",{onSubmit:n.onSubmit,children:[Object(s.jsxs)("div",{children:[" ",n.name.name,": ",Object(s.jsx)("input",{value:n.name.value,onChange:n.name.onChange})]}),Object(s.jsxs)("div",{children:[" ",n.number.name,": ",Object(s.jsx)("input",{value:n.number.value,onChange:n.number.onChange})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.data,t=e.onClick;return Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsxs)("li",{children:[e.name," (",e.number,") ",Object(s.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.name)}))})},m=function(e){var n=e.value,t=e.onChange;return Object(s.jsx)("form",{children:Object(s.jsxs)("div",{children:["Filter shown with ",Object(s.jsx)("input",{value:n,onChange:t})]})})},d=t(4),f=t.n(d),b="http://localhost:3001/api/persons",j={getAll:function(){return f.a.get(b).then((function(e){return e.data}))},create:function(e){return f.a.post(b,e).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},erase:function(e){return f.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))}},h=(t(39),function(e){var n=e.notification;return null===n.message?null:Object(s.jsx)("div",{className:n.style,children:n.message})}),O=function(){var e=Object(o.useState)(""),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(o.useState)("Omar Valenzuela"),d=Object(u.a)(r,2),f=d[0],b=d[1],O=Object(o.useState)("668-856-12-98"),v=Object(u.a)(O,2),p=v[0],g=v[1],x=Object(o.useState)([]),w=Object(u.a)(x,2),y=w[0],C=w[1],k=Object(o.useState)({message:null,style:null}),S=Object(u.a)(k,2),T=S[0],L=S[1];Object(o.useEffect)((function(){j.getAll().then((function(e){return C(e)}))}),[]);var A=function(e,n){n(e.target.value)},V={onSubmit:function(e){e.preventDefault();var n={name:f,number:p};if(!function(e){var n=!1,t=!1;return""===e.name?window.alert("the name field has been left empty"):t=!0,""===e.number?window.alert("the number field has been left empty"):n=!0,!(t&&n)}(n)){var t=function(e,n){var t=n.name.toLowerCase();return e.find((function(e){return e.name.toLowerCase()===t}))}(y,n);if(t){if(window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with a new one?"))){var a=Object(c.a)(Object(c.a)({},t),{},{number:n.number});j.update(a.id,a).then((function(e){C(y.map((function(n){return n.id!==e.id?n:e}))),L({message:"".concat(e.name," was updated successfully"),style:"success"}),setTimeout((function(){L({message:null,style:null})}),5e3)})).catch((function(e){L({message:e.response.data.error,style:"error"}),setTimeout((function(){L({message:null,style:null})}),5e3)}))}}else j.create(n).then((function(e){C(y.concat(e));var n={message:"".concat(e.name," was saved"),style:"success"};L(n),setTimeout((function(){L({message:null,style:null})}),5e3)})).catch((function(e){var n={message:e.response.data.error,style:"error"};L(n),setTimeout((function(){L({message:null,style:null})}),5e3)})),b(""),g("")}},name:{name:"name",value:f,onChange:function(e){return A(e,b)}},number:{name:"number",value:p,onChange:function(e){return A(e,g)}}};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(h,{notification:T}),Object(s.jsx)(m,{value:t,onChange:function(e){return A(e,a)}}),Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsx)(i,{formValues:V}),Object(s.jsx)("h3",{children:"Numbers"}),Object(s.jsx)(l,{data:function(e,n){var t=n.toLowerCase();return""===t?e:e.filter((function(e){return e.name.toLowerCase().includes(t)}))}(y,t),onClick:function(e){window.confirm("Delete ".concat(e.name,"?"))&&j.erase(e.id).then(C(y.filter((function(n){return n.id!==e.id})))).catch((function(n){var t={message:"The person ".concat(e.name," was already deleted from server"),style:"error"};L(t),setTimeout((function(){L({message:null,style:null})}),5e3),C(y.filter((function(n){return n.id!==e.id})))}))}})]})};r.a.render(Object(s.jsx)(O,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5e01a2b7.chunk.js.map